function jsonTranslator(t,e,n){function a(t){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var t=s.getLangCookie(),n=JSON.parse(e.responseText);s.lang_json[s.transLang]=n,s.lang_json[s.defaultLang]={"text-translator":{},"abbrv-translator":{}},s.lang_json[s.defaultLang]["text-translator"]=r(n["text-translator"]),s.lang_json[s.defaultLang]["abbrv-translator"]=r(n["abbrv-translator"]),"undefined"!=typeof t&&""!==t&&s.translate(t)}},e.open("GET",t,!0),e.send(null)}function r(t){var e={};for(var n in t)e[t[n]]=n;return e}function o(t,e,n){var a=t.innerHTML,r=t.childNodes,o="";if(""!==t.getAttribute(n)&&(o=t.getAttribute(n),a=t.getAttribute(o)),""===t.getAttribute(n)&&r.length>1)for(var s in r){var i=r[s];if(3===i.nodeType){var l=i.textContent;if(e[l.trim()]){var g=l.trim(),f=e[l.trim()];l=l.replace(g,f)}else{var u=l;for(var g in e)u.indexOf(g)>-1&&u.length&&(l=l.replaceAll(g,e[g]),u=u.replaceAll(g,""))}i.textContent=l}}else{if(e[a.trim()]){var g=a.trim(),f=e[a.trim()];a=a.replace(g,f)}else{var u=a;for(var g in e){if(0===u.length)break;a.indexOf(g)>-1&&(a=a.replaceAll(g,e[g]),u=u.replaceAll(g,""))}}""!==o?t.setAttribute(o,a):t.textContent=a}}var s=this,i=!0,l=!1;if(n="undefined"==typeof n?"":n,"undefined"==typeof t)console.error("Provide an appropriate JSON object or file path for a JSON file");else if("object"==typeof t)t=t;else try{t=JSON.parse(t)}catch(g){i=!1}if(this.init=function(t,e,n){if(i)s.defaultLang=e,s.transLang=n,s.lang_json={},s.lang_json[n]=t,s.lang_json[e]={"text-translator":{},"abbrv-translator":{}},s.lang_json[e]["text-translator"]=r(t["text-translator"]),s.lang_json[e]["abbrv-translator"]=r(t["abbrv-translator"]),l=!0;else{s.langFilePath=t,s.defaultLang=e,s.transLang=n,s.lang_json={},s.addedJson="undefined"!=typeof add_json?add_json:{};try{a(s.langFilePath)}catch(o){console.exception(o.message)}}},s.init(t,e,n),this.updateLang=function(){var t=s.getLangCookie(),e="undefined"==typeof t||""===t?s.transLang:s.defaultLang,n=t===s.defaultLang?s.transLang:e;s.lang_json[n];s.setLangCookie(n);try{s.translate(n)}catch(a){console.exception(a.message)}},this.setLangCookie=function(t){new Date;setCookie("lang",t,s.getExpHours())},this.getLangCookie=function(){return getCookie("lang")},this.setExpHours=function(t){s.EXP_DAYS=t},this.getExpHours=function(){return s.EXP_DAYS},this.translate=function(t){var e=s.lang_json[t]["text-translator"],n=s.lang_json[t]["abbrv-translator"],a=document.querySelectorAll("[data-translator]"),r=document.querySelectorAll("[data-abbr-translator]");for(var i in a)1===a[i].nodeType&&o(a[i],e,"data-translator");for(var i in r)1===r[i].nodeType&&o(r[i],n,"data-abbr-translator")},l){var f=s.getLangCookie();"undefined"!=typeof f&&""!==f&&s.translate(f)}}function setCookie(t,e,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var r="expires="+a.toUTCString();document.cookie=t+"="+e+"; "+r}function getCookie(t){for(var e=t+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""}String.prototype.replaceAll=function(t,e,n){var a=this.toString(),r="",o=a,s=0,i=-1;for(n&&(t=t.toLowerCase(),o=a.toLowerCase());(i=o.indexOf(t))>-1;)r+=a.substring(s,s+i)+e,o=o.substring(i+t.length,o.length),s+=i+t.length;return o.length>0&&(r+=a.substring(a.length-o.length,a.length)),r};
