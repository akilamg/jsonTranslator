function jsonTranslator(t,e,n){function a(t){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&200==e.status){var t=i.getLangCookie(),n=JSON.parse(e.responseText);i.lang_json[i.transLang]=n,i.lang_json[i.defaultLang]={"text-translator":{},"abbrv-translator":{}},i.lang_json[i.defaultLang]["text-translator"]=r(n["text-translator"]),i.lang_json[i.defaultLang]["abbrv-translator"]=r(n["abbrv-translator"]),"undefined"!=typeof t&&""!==t&&i.translate(t)}},e.open("GET",t,!0),e.send(null)}function r(t){var e={};for(var n in t)e[t[n]]=n;return e}function o(t,e,n){var a=t.innerHTML,r=t.childNodes,o="";if(""!==t.getAttribute(n)&&(o=t.getAttribute(n),a=t.getAttribute(o)),""===t.getAttribute(n)&&r.length>1)for(var i in r){var s=r[i];if(3===s.nodeType){var l=s.textContent;if(e[l.trim()]){var g=l.trim(),f=e[l.trim()];l=l.replace(g,f)}else{var u=l;for(var g in e)u.indexOf(g)>-1&&u.length&&(l=l.replace(g,e[g]),u=u.replace(g,""))}s.textContent=l}}else{if(e[a.trim()]){var g=a.trim(),f=e[a.trim()];a=a.replace(g,f)}else{var u=a;for(var g in e){if(0===u.length)break;a.indexOf(g)>-1&&(a=a.replace(g,e[g]),u=u.replace(g,""))}}""!==o?t.setAttribute(o,a):t.textContent=a}}var i=this,s=!0,l=!1;if(n="undefined"==typeof n?"":n,"undefined"==typeof t)console.error("Provide an appropriate JSON object or file path for a JSON file");else if("object"==typeof t)t=t;else try{t=JSON.parse(t)}catch(g){s=!1}if(this.init=function(t,e,n){if(s)i.defaultLang=e,i.transLang=n,i.lang_json={},i.lang_json[n]=t,i.lang_json[e]={"text-translator":{},"abbrv-translator":{}},i.lang_json[e]["text-translator"]=r(t["text-translator"]),i.lang_json[e]["abbrv-translator"]=r(t["abbrv-translator"]),l=!0;else{i.langFilePath=t,i.defaultLang=e,i.transLang=n,i.lang_json={},i.addedJson="undefined"!=typeof add_json?add_json:{};try{a(i.langFilePath)}catch(o){console.exception(o.message)}}},i.init(t,e,n),this.updateLang=function(){var t=i.getLangCookie(),e="undefined"==typeof t||""===t?i.transLang:i.defaultLang,n=t===i.defaultLang?i.transLang:e;i.lang_json[n];i.setLangCookie(n);try{i.translate(n)}catch(a){console.exception(a.message)}},this.setLangCookie=function(t){new Date;setCookie("lang",t,i.getExpHours())},this.getLangCookie=function(){return getCookie("lang")},this.setExpHours=function(t){i.EXP_DAYS=t},this.getExpHours=function(){return i.EXP_DAYS},this.translate=function(t){var e=i.lang_json[t]["text-translator"],n=i.lang_json[t]["abbrv-translator"],a=document.querySelectorAll("[data-translator]"),r=document.querySelectorAll("[data-abbr-translator]");for(var s in a)1===a[s].nodeType&&o(a[s],e,"data-translator");for(var s in r)1===r[s].nodeType&&o(r[s],n,"data-abbr-translator")},l){var f=i.getLangCookie();"undefined"!=typeof f&&""!==f&&i.translate(f)}}function setCookie(t,e,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var r="expires="+a.toUTCString();document.cookie=t+"="+e+"; "+r}function getCookie(t){for(var e=t+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}return""}
